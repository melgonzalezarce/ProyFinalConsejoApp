<!DOCTYPE html>
<html>
<head>
    <title>Database Example</title>


    <script type="text/javascript">
        document.addEventListener("deviceready", onDeviceReady, false);


        function populateDB(tx) {
            tx.executeSql('DROP TABLE IF EXISTS avengers');
            tx.executeSql('CREATE TABLE IF NOT EXISTS avengers (id unique, heroe, name)');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (1, "Ironman", "Tony Stark")');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (2, "Thor", "Thor-ibio")');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (3, "Captain America", "Steve Rogers")');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (4, "Hulk", "Dr. Bruce Banner")');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (5, "Hawkeye", "Clinton Francis")');
            tx.executeSql('INSERT INTO avengers (id, heroe, name) VALUES (6, "Black Widow", "Natalia Alianovna")');
        }

        function queryDB(tx) {
            tx.executeSql('SELECT * FROM avengers', [], querySuccess, errorDB);
        }
        // Query the success callback
        //
        function querySuccess(tx, results) {
            //first get the number of rows in the result set
            var len = results.rows.length;
            var status = document.getElementById("result");
            var string = "Rows: " + len + "<br/>";
            string = "<table><tr><td>ID</td> <td>Heroe</td><td>Name</td></tr>"
            for (var i = 0; i < len; i++) {
                string += "<tr><td>" + results.rows.item(i).id + "</td>" + "<td>" + results.rows.item(i).heroe + "</td>" +
                        "<td>" + results.rows.item(i).name + "</td></tr>";
            }
            status.innerHTML = string;
        }
        function errorDB(err) {
            alert("Error processing SQL: " + err.code + ", " + err.message);
        }
        function successDB() {
            var db = window.openDatabase("Superheroes", "1.0", "Superheroes", 200000);
            db.transaction(queryDB, errorDB);
        }

        function onDeviceReady() {
            var db = window.openDatabase("Superheroes", "1.0", "Superheroes", 200000);
            db.transaction(populateDB, errorDB, successDB);
        }
    </script>
</head>
<body>
    <h1>Superheroes</h1>

    <div id='result'></div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

</body>
</html>
